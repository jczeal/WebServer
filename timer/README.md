
定时器处理非活动连接
===============
由于非活跃连接占用了连接资源，严重影响服务器的性能，通过实现一个服务器定时器，处理这种非活跃连接，释放连接资源。利用alarm函数周期性地触发SIGALRM信号,该信号的信号处理函数利用管道通知主循环执行定时器链表上的定时任务.
> * 统一事件源
> * 基于升序链表的定时器
> * 处理非活动连接

* 定时器设计:封装连接资源、超时时间和回调函数，这里的回调函数指向定时事件
连接资源包括客户端套接字地址、文件描述符和定时器
定时事件为回调函数，这里是删除非活动socket上的注册事件，并关闭
定时器超时时间 = 浏览器和服务器连接时刻 + 固定时间(TIMESLOT)，可以看出，定时器使用绝对时间作为超时值，这里alarm设置为5秒，连接超时为15秒
处理定时器为非必须事件，收到信号并不是立马处理,完成读写事件后，再进行处理

* 定时器设计缺陷及改进
每次遍历添加和修改定时器的效率偏低(O(n))，使用最小堆结构可以降低时间复杂度降至(O(logn))
每次以固定的时间间隔触发SIGALRM信号，调用tick函数处理超时连接会造成一定的触发浪费.对此，我们可以动态的设置TIMESLOT的值，每次将其值设置为当前最先超时的定时器与当前时间的时间差，这样每次调用tick函数，超时时间最小的定时器必然到期，并被处理，然后再从时间堆中取一个最先超时的定时器的时间与当前时间做时间差，更新TIMESLOT的值


连接资源中的address虽然被赋值，但并未用到.类似的，可以对比HTTP类中address属性，只在日志输出中用到.但不能说这个变量没有用，因为我们可以找到客户端连接的ip地址，用它来做一些业务，比如通过ip来判断是否异地登录等等